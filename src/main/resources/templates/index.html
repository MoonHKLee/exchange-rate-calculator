<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        .select-container {
            display: flex;
            align-items: center;
        }
        .select-container label {
            margin-right: 10px;
        }
    </style>
</head>
<body>
<H1>환율계산</H1>

<h3>송금국가:미국(USD)</h3>
<h3>
    <form>
        <div class="select-container">
            <label for="currency">수취국가:</label>
            <select id="currency">
                <option value="USDKRW">한국(KRW)</option>
                <option value="USDJPY">일본(JPY)</option>
                <option value="USDPHP">필리핀(PHP)</option>
            </select>
        </div>
    </form>
</h3>
<h3>환율: <span id="rate" th:text="${rate}"></span></h3>
<h3>송금액:<label for="amount"></label><input type="text" id="amount" value="1000">USD</h3>
<button id="btn">계산</button>
</body>
</html>

<script>
    // 수취 국가 변경 이벤트 리스너
    const selectElement = document.getElementById("currency");
    selectElement.addEventListener("change", function() {
        const selectedCurrency = selectElement.value;
        fetch(`/exchangeRate?exchangeRateKey=${selectedCurrency}`)
            .then(response => response.text())
            .then(data => {
                const rateElement = document.getElementById("rate");
                rateElement.textContent = data + " " + selectedCurrency.substring(3)+"/USD";
            })
            .catch(error => {
                console.error("Error fetching exchange rate:", error);
            });
    });


</script>